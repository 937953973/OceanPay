# 跨境电商平台业务需求文档 v1.0

## 一、概述

**业务定位**：面向全球用户的B2C跨境电商平台，支持多国家用户注册、多币种支付、多语言展示，主营实体商品（3C、服饰、美妆等），需要处理跨境物流、关税、汇率转换等特殊业务。

**用户角色**：
- **消费者**：浏览商品、下单购买、支付、查看订单物流、售后
- **商家**：商品上架、库存管理、订单处理、发货、对账（初期可先由平台自营，后期可扩展）
- **平台运营**：用户管理、商品审核、订单监控、营销活动、数据统计
- **系统管理员**：权限管理、配置管理（汇率、税率、物流渠道等）

**非功能性需求**（部分）：
- 支持高并发（如秒杀）
- 数据最终一致性（跨服务）
- 安全性（支付、用户隐私）

---

## 二、前台功能（消费者端）

### 2.1 用户与账户
- **注册/登录**：支持邮箱/手机号注册，密码+验证码；可选第三方登录（Google、Facebook）
- **个人资料**：维护个人信息（姓名、地址簿、默认币种、语言偏好）
- **地址管理**：添加/编辑收货地址（含国家、州/省、城市、详细地址、邮编、联系电话）
- **多币种设置**：用户可选择显示币种，价格根据实时汇率转换（后台需维护汇率）
- **多语言**：界面文本支持多语言包（初期可先中英文）

### 2.2 商品浏览
- **商品分类导航**：多级分类，支持按品类、品牌筛选
- **商品搜索**：关键词搜索，支持模糊匹配、热门搜索推荐
- **商品列表**：展示商品主图、标题、价格（根据用户币种显示）、销量、评价星级
- **商品详情**：
    - 多图展示、视频
    - 价格显示（原价、折扣价）、库存状态
    - 规格选择（如颜色、尺寸）
    - 税费预估（根据收货国家显示预估税费）
    - 配送信息（预计到货时间、运费）
    - 商品评价列表
    - 收藏商品
- **商品推荐**：基于浏览历史、购买记录推荐相关商品（可后期实现）

### 2.3 购物车
- **加入购物车**：选择规格后加入，购物车数量实时更新
- **购物车列表**：展示商品信息、单价、数量、小计（按用户币种显示）
- **编辑购物车**：修改数量、删除商品、移入收藏夹
- **选中/取消**：支持批量结算
- **价格计算**：实时计算商品总额、运费、税费，并展示最终应付金额
- **跨境提示**：如商品从不同国家发货，提示可能产生关税

### 2.4 下单结算
- **结算页**：
    - 收货地址选择（若跨境，提示关税清关信息）
    - 配送方式选择（不同物流渠道、时效、运费）
    - 发票信息（可选）
    - 优惠券/促销码输入（如有）
    - 订单金额明细（商品总价+运费+税费-优惠）
    - 支付方式选择（信用卡、PayPal、本地支付方式等，根据用户国家展示可用支付方式）
- **提交订单**：生成订单号，锁定库存，跳转支付页面

### 2.5 支付
- **支付方式集成**：支持Stripe（信用卡、借记卡）、PayPal、Apple Pay/Google Pay（可选）
- **多币种支付**：根据用户选择的支付方式，可能以支付网关支持的币种进行扣款，系统需处理汇率转换（如用户选择欧元支付，但商品基准是美元，支付网关可能接收欧元，需要转换）
- **支付状态处理**：
    - 支付成功：跳转成功页，发送邮件/短信通知
    - 支付失败：提示重新支付
    - 支付超时：订单取消（定时任务处理）
- **支付记录**：用户可查看每笔订单的支付详情（支付方式、金额、时间、交易号）

### 2.6 订单管理
- **订单列表**：按状态分类（待支付、待发货、待收货、已完成、已取消）
- **订单详情**：
    - 订单基本信息（订单号、下单时间、订单状态）
    - 商品列表（名称、规格、单价、数量）
    - 支付信息（支付方式、支付金额、支付时间）
    - 物流信息（物流公司、运单号、物流跟踪状态）
    - 操作按钮（取消订单、确认收货、申请售后）
- **取消订单**：待支付状态可取消；待发货状态取消需审核（若已发货则不可取消）

### 2.7 售后服务
- **申请售后**：选择订单商品，申请退货/换货/退款，填写原因
- **售后进度**：查看售后申请处理状态（审核中、通过、驳回、退款完成）
- **退款流程**：审核通过后，原路退款（需调用支付网关退款接口）

### 2.8 物流跟踪
- **集成物流API**：对接主流物流商（如DHL、FedEx、顺丰国际）查询轨迹
- **物流状态更新**：在订单详情展示实时轨迹

---

## 三、后台功能（商家端 & 平台运营端）

### 3.1 商品管理（商家/运营）
- **商品上架**：
    - 填写基本信息：标题、描述、关键词、分类、品牌
    - 上传图片、视频
    - 设置规格（SKU）：颜色、尺寸、价格、库存、SKU编码
    - 设置物流信息：重量、尺寸、发货地、运费模板
    - 设置税费类别（如是否应税）
    - 设置上下架时间
- **商品编辑**：修改信息、下架商品
- **商品审核**（若平台审核）：运营审核新上架商品是否符合规范
- **库存管理**：批量导入/导出库存、设置库存预警

### 3.2 订单处理（商家/运营）
- **订单列表**：按状态筛选、搜索订单
- **订单详情**：查看用户信息、商品清单、支付状态、物流信息
- **订单操作**：
    - 发货：录入物流单号、选择物流商，订单状态变为“已发货”
    - 修改订单（如地址、商品，需谨慎）
    - 取消订单（退款）
    - 备注
- **发货管理**：支持批量发货、打印发货单

### 3.3 售后管理（商家/运营）
- **售后申请列表**：查看用户提交的售后申请
- **审核处理**：同意/拒绝售后申请；同意退货需提供退货地址
- **退款操作**：确认收货后，操作退款（调用支付网关）
- **售后记录**：查看历史处理记录

### 3.4 营销推广（运营）
- **优惠券/促销码**：创建优惠券（满减、折扣），设置使用范围、有效期
- **活动管理**：创建限时秒杀、团购、满减活动（活动商品、价格、库存、时间）
- **首页Banner管理**：配置首页轮播图、跳转链接

### 3.5 用户管理（运营）
- **用户列表**：查看注册用户信息、状态（正常/冻结）
- **用户详情**：订单记录、收藏、地址、登录日志
- **用户冻结/解冻**：处理违规用户

### 3.6 内容管理（运营）
- **文章管理**：发布公告、帮助中心文章、跨境政策说明
- **常见问题维护**

### 3.7 汇率与税费配置（管理员）
- **汇率管理**：
    - 手动更新汇率或对接第三方API自动更新
    - 设置基准货币（如USD）
    - 维护汇率表（货币对、汇率、更新时间）
- **税费配置**：
    - 定义不同国家的税率（如欧盟各国增值税率）
    - 按商品品类设定税率规则
    - 支持根据收货地址计算税费

### 3.8 物流配置（管理员）
- **物流渠道管理**：配置支持的物流商（名称、代码、运费计算规则、预计送达时间）
- **运费模板**：设置按重量、件数、金额的运费规则，不同国家不同运费

### 3.9 支付配置（管理员）
- **支付方式管理**：配置各支付网关参数（Stripe API Key、PayPal Client ID等），启用/禁用特定支付方式
- **支付渠道按国家显示**：配置不同国家可用的支付方式

### 3.10 数据统计（运营/管理员）
- **销售数据**：总销售额、订单量、转化率、热销商品
- **用户数据**：新增用户、活跃用户
- **跨境数据**：各国销售额、热门国家
- **报表导出**：支持Excel/CSV导出

### 3.11 系统管理（管理员）
- **权限管理**：角色管理（运营、客服、财务）、菜单权限、数据权限
- **操作日志**：记录后台用户关键操作
- **系统配置**：网站名称、SEO关键词、缓存设置等

---

## 四、跨境业务特殊需求补充

### 4.1 多语言与本地化
- 商品标题、描述、属性需支持多语言（可先做中英文）
- 前端界面多语言包
- 价格、日期格式按用户偏好显示

### 4.2 多币种与汇率
- 所有商品以基准货币（如USD）存储价格
- 实时汇率转换展示，但下单时锁定汇率（或按支付网关汇率）
- 支付时可能需要二次转换（用户币种 → 支付网关币种）

### 4.3 关税与税费
- 用户在下单时需知晓可能产生的关税（DDP或DDU模式）
- DDP（完税交货）：平台代收关税并缴纳，价格中包含关税
- DDU（未完税交货）：用户收货时自行向海关缴纳
- 需要根据不同国家的进口政策配置税率

### 4.4 跨境物流
- 支持多种物流方式：经济快递、标准快递、特快
- 物流追踪需要对接国际物流商API
- 物流状态需考虑清关环节（如“清关中”、“已清关”）

### 4.5 支付合规
- 遵守各国支付法规（如PCI-DSS）
- 支持本地支付方式（如欧洲的SOFORT、巴西的Boleto）

### 4.6 海关申报
- 生成商业发票（Invoice）供清关使用，包含商品描述、HS编码、数量、价值
- 部分国家需要提供收件人税号（如欧盟的IOSS）

---

## 五、业务流程关键点（用于指导开发）

### 5.1 商品发布流程
1. 商家填写商品信息，设置价格（基准货币）
2. 系统生成SKU
3. 运营审核通过后上架
4. 前台按用户币种显示价格

### 5.2 用户下单流程
1. 用户选择商品加入购物车
2. 进入结算页，选择收货地址（国家）
3. 系统根据收货国家计算运费、税费（调用运费模板、税率配置）
4. 用户选择支付方式
5. 生成订单（状态待支付），锁定库存
6. 跳转支付网关完成支付
7. 支付成功回调更新订单状态，发送确认邮件，触发发货流程

### 5.3 跨境支付流程
1. 订单总额按用户币种计算（如有汇率转换）
2. 调用支付网关时，可能需要转换成网关支持的币种（如欧元）
3. 支付网关返回支付结果，系统记录支付流水
4. 若支付成功，订单状态变更为待发货

### 5.4 发货流程
1. 商家在后台标记发货，录入物流单号
2. 系统更新订单状态为已发货
3. 用户收到发货通知，可在订单详情查看物流
4. 物流商反馈轨迹，系统定时同步

### 5.5 售后流程
1. 用户申请退款/退货
2. 运营审核，若同意则生成退货地址
3. 用户寄回商品，填写物流单号
4. 商家收货确认后，操作退款
5. 系统调用支付网关退款接口，原路退回

---

## 六、非功能性需求（开发需考虑）

- **高并发**：秒杀活动需限流、缓存、异步处理
- **数据一致性**：跨服务操作（如下单扣库存）需最终一致性
- **安全性**：用户密码加密、支付信息不落库、防SQL注入、XSS
- **可扩展性**：模块化设计，便于后期拆分微服务
- **日志与监控**：关键业务操作记录日志，便于排查问题
- **国际化**：支持多时区、多语言、多币种
